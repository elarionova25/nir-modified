{
  "results": [{
    "id": "impacket-secretsdump",
    "title": "Диалоги о Impacket-secretsdump",
    "content": "Доброго всем времени суток! Зачастую, получается так, что изобретать свой велосипед нет никакой необходимости, и намного удобнее взять уже чье-то готовое решение, а уж тем более если это решение «прошло огонь, воду, и медные трубы». При этом, есть великий соблазн использовать его, не тратя времени на понимание принципа работы, руководствуясь истиной: «Я под капот не полезу, все равно я в этом ничего не понимаю! Работает? Ну и отлично!»\n\nВ сегодняшней статье речь пойдет о всем знакомой утилите из пакета Impacket под названием secretsdump. Безусловно, эта статья не раскроет всех теоретических аспектов работы данного скрипта, но нацелена на повышение осознанности при использовании данной утилиты! В любом случае, нет предела совершенству, и, при желании, можно еще больше углубить свои знания, начав разбираться самостоятельно! (будем считать, что это «своего рода» трамплин)/\n\nСнизу ссылочка на сам проект, если вдруг у вас возникнет непреодолимый интерес покопаться в строках программного кода!\n\nИ для чего нам все это?\n\n«Утилита позволяет сдампить хэши с удаленного Domain Controller без запуска на нем каких-либо агентов.» Конечно, это не единственный путь для достижения похожего результата. Но secretsdump любят и используют по всему миру, за возможность удаленного дампа чувствительной информации с контроллера домена!\n\n После корректной работы impacket-secretsdump, у нас появляется возможность осуществить атаки: Pass-the-Hash (для Lateral Movement), Golden Ticket (поставив галочку напротив пункта «осуществить persistence») да и вообще, по сути взять домен под свой контроль и «чувствовать себя вольготно».\n\nЧто получается на выходе?\n\nТеперь настало время для детального анализа «выходной продукции» после работы (успешной) данной утилиты!\n\nСперва происходит извлечение ключа загрузки целевой машины. Он находится в SYSTEM hive в HKLM\\SYSTEM. Конечно если мы хотим выполнить это действие вручную, то для этого мы просто выполняем команду reg save HKLM\\SYSTEM после чего копируем его с целевой машину любым доступным для нас способом. Ключ загрузки понадобится позже для расшифровки файла ntds.dit.\n\nДалее осуществляется дамп файла SAM находящегося в HKLM\\SAM. The Security Account Manager (SAM) – это файл реестра, который хранит пароли локальных пользователей компьютера. Хранятся они, конечно, в зашифрованном виде.\n\nКогда пользователь домена проходит аутентификацию на контроллере домена при входе в систему, его учетные данные сохраняются на локальном компьютере по умолчанию (Cached Credentials: username:hash). Это позволяет пользователю входить под своей учетной записью на компьютер из домена даже в том случае, если Контроллер недоступен (проблема с сетью, или DC выключен)\n\nСохраненные пароли хранятся в ветке реестра HKEY_LOCAL_MACHINE\\Security\\Cache \n\n <a href='https://habr.com/ru/post/703332/' target=\"_blank\">Продолжение</a>",
    "image": "https://s3-us-west-2.amazonaws.com/s.cdpn.io/450744/shalom-mwenesi.jpg",
    "meta": {
      "description": "Информационная безопасность",
      "published": "2022-12-03T22:30:56Z",
      "author": "hotmanchester"
    }
  }]
}
